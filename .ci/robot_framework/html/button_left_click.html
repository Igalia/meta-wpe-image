<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>

<style>

body {
    background-color: white;
    margin: 10px;
}

textarea {
    margin-top: 20px;
}
</style>

</head>

<body>
    <form>
        <textarea id="textarea-1" cols="100" rows="50"></textarea>
    </form>
</body>

<script type="application/javascript">
    var result = 'white';

    let textarea = document.querySelector('#textarea-1');
    let start = { 'x': 0, 'y': 0 };
    let end = { 'x': 0, 'y': 0 };

    function log(str) {
        textarea.value = str + "\n" + textarea.value;
    }

    function click() {
        document.body.style['background-color'] = 'lightgreen';
        setTimeout(() => {
            log('\nreset color: white\n');
            document.body.style['background-color'] = 'white';
        }, 1000);
    }

    window.addEventListener('mousedown', (e) => {
        result = 'green';
        start.x = e.x, start.y = e.y;
        log(`mousedown: ${e.x}, ${e.y}`);
    });

    window.addEventListener('mouseup', (e) => {
        end.x = e.x, end.y = e.y;

        let delta_x = Math.abs(end.x - start.x);
        let delta_y = Math.abs(end.y - start.y);

        log(`mouseup: ${e.x}, ${e.y}; delta_x: ${delta_x}, delta_y: ${delta_y}`);

        result = 'green';

        if (delta_x <= 8 && delta_y <= 8) {
            result = 'green';
            log('\nValid click');
            click();
        } else {
            result = 'white';
            log('\nNot valid click');
        }
    });
</script>

</html>
